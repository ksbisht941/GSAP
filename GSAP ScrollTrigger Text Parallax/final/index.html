<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <section>
      <div class="title titleGreathorned">
        <span>The great horned owl</span> also known as the tiger owl or the
        hoot owl, is a large owl native to the Americas.
      </div>
    </section>

    <section class="cluster clusterGreat">
      <div class="circle clusterPieces"></div>

      <div class="owlHorned clusterPieces">
        <img
          src="https://www.micelistudios.com/sandbox/scrolltrigger/imgs/great_horned_owl.jpg"
        />
        <div class="caption"><span>/01</span> GREAT HORNED OWL</div>
      </div>

      <img
        class="dotsBlue clusterPieces"
        src="https://www.micelistudios.com/sandbox/scrolltrigger/imgs/dots_blue_494x434.svg"
      />
    </section>

    <section>
      <div class="title titleBurrowing">
        <span>The burrowing owl</span> is a small, long-legged owl found
        throughout open landscapes of North and South America.
      </div>
    </section>

    <section class="cluster clusterBurrowing">
      <img
        class="clusterPieces triangle"
        src="https://www.micelistudios.com/sandbox/scrolltrigger/imgs/triangle_448x446.svg"
      />

      <div class="clusterPieces owlBurrowing">
        <img
          src="https://www.micelistudios.com/sandbox/scrolltrigger/imgs/burrrowing_owl_674x700.jpg"
        />
        <div class="caption captionBurrowing">
          <span>/02</span> BURROWING OWL
        </div>
      </div>

      <img
        class="clusterPieces dotsWhite"
        src="https://www.micelistudios.com/sandbox/scrolltrigger/imgs/dots_white_310x588.svg"
      />
    </section>

    <section class="spcr300"></section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/SplitText3.min.js"></script>
    <script>
      /* ------Great Horned Owl Sequence------  */
      gsap.set(".circle", { yPercent: -5 });
      gsap.set(".dotsBlue", { yPercent: 10 });
      gsap.set(".owlHorned", { yPercent: -20 });
      gsap.set(".clusterGreat", { yPercent: 5 });

      gsap.to(".circle", {
        yPercent: 5,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterGreat",
          scrub: 1,
        },
      });

      gsap.to(".dotsBlue", {
        yPercent: -10,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterGreat",
          scrub: 1,
        },
      });

      gsap.to(".owlHorned", {
        yPercent: 20,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterGreat",
          scrub: 1,
        },
      });

      gsap.to(".caption", {
        yPercent: 100,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterGreat",
          // markers:true,
          end: "bottom center",
          scrub: 1,
        },
      });

      gsap.to(".clusterGreat", {
        yPercent: -5,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterGreat",
          end: "bottom center",
          scrub: 1,
        },
      });

      /* ------Burrowing Owl Sequence------  */
      gsap.set(".triangle", { yPercent: 25, rotation: -90 });
      gsap.set(".dotsWhite", { yPercent: 10 });
      gsap.set(".owlBurrowing", { yPercent: -20 });
      gsap.set(".clusterBurrowing", { yPercent: 5 });

      gsap.to(".triangle", {
        yPercent: -5,
        rotation: 40,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterBurrowing",
          scrub: 1,
        },
      });

      gsap.to(".dotsWhite", {
        yPercent: -10,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterBurrowing",
          scrub: 1,
        },
      });

      gsap.to(".owlBurrowing", {
        yPercent: 20,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterBurrowing",
          scrub: 1,
        },
      });

      gsap.to(".captionBurrowing", {
        yPercent: 200,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterBurrowing",
          // markers:true,
          end: "bottom center",
          scrub: 1,
        },
      });

      gsap.to(".clusterBurrowing", {
        yPercent: -5,
        ease: "none",
        scrollTrigger: {
          trigger: ".clusterBurrowing",
          // markers:true,
          end: "bottom center",
          scrub: 1,
        },
      });

      /*
gsap.set("#wrappie", {transformOrigin:"top left"});

function sizeAll() {
	var w = document.body.clientWidth;
  	console.log(w);
	if ( w < 960) {
     gsap.set("#wrappie",  {scale:w/100*.125}); 
		} 
}

window.onresize = sizeAll;

sizeAll();
*/

      /*
const quotes = document.querySelectorAll(".title");

function setupSplits() {
  quotes.forEach(quote => {
    // Reset if needed
    if(quote.anim) {
      quote.anim.progress(1).kill();
      quote.childSplit.revert();
      quote.parentSplit.revert();
    }
    
    // Set up the splits
    quote.parentSplit = new SplitText(quote, {
      type: "lines",
      linesClass: "split-parent"
    });

    quote.childSplit = new SplitText(quote, { type: "lines" });

    // Set up the anim
    quote.anim = gsap.from(quote.childSplit.chars, {
      scrollTrigger: {
        trigger: quote,
        toggleActions: "restart pause resume reverse",
        start: "top 50%",
      },
      duration: 0.6, 
      ease: "circ.out", 
      y: 10,
      opacity:0,
      stagger: 0.02,
    });
  });
}

ScrollTrigger.addEventListener("refresh", setupSplits);
setupSplits();
*/

      /* --- Split the text, Great Horned Owl --- */
      var tlSplitGreat = gsap.timeline({
          onComplete: () => {
            SplitGreat.revert();
          },
        }),
        SplitGreat = new SplitText(".titleGreathorned", {
          type: "words,chars",
        }),
        chars = SplitGreat.chars;

      tlSplitGreat.from(
        chars,
        {
          duration: 0.8,
          opacity: 0,
          y: 10,
          ease: "circ.out",
          stagger: 0.02,
        },
        "+=0"
      );

      /* --- Split the text, Burrowing Owl --- */
      function setupSplits() {
        var tlSplitBurrowing = gsap.timeline(),
          SplitBurrowing = new SplitText(".titleBurrowing", {
            type: "words,chars",
          }),
          chars = SplitBurrowing.chars; //an array of all the divs that wrap each character

        tlSplitBurrowing.from(
          chars,
          {
            duration: 0.8,
            opacity: 0,
            y: 10,
            ease: "circ.out",
            stagger: 0.02,
            scrollTrigger: {
              trigger: ".titleBurrowing",
              //markers:true,
              start: "top 75%",
              end: "bottom center",
              scrub: 1,
            },
            //,   onComplete: () => {SplitBurrowing.revert()}
          },
          "+=0"
        );

        // window.addEventListener('resize', function() {
        // SplitBurrowing.revert();
        // });
      }

      /*
ScrollTrigger.addEventListener("scrollEnd", function() {
    SplitBurrowing.revert();
});
*/

      ScrollTrigger.addEventListener("refresh", setupSplits);
      //ScrollTrigger.addEventListener("scrollEnd", () => SplitBurrowing.revert());
      setupSplits();

      /*
// Alternate way of resizing the cluster elements since they are absolutely positioned
$(window).resize(function (){
if(window.matchMedia("(max-width: 500px)").matches){
    gsap.set(".clusterGreat", {scale: 0.2, transformOrigin: "center center"});
} else {
  gsap.set(".clusterGreat", {scale: 1, transformOrigin: "center center"});
          }
});
*/
    </script>
  </body>
</html>
